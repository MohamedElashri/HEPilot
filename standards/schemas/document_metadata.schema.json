{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/MohamedElashri/HEPilot/standards/schemas/document_metadata.schema.json",
  "title": "Document Metadata",
  "description": "Comprehensive metadata for a processed document including provenance, bibliographic information, and processing details. This metadata is stored as document_metadata.json alongside the document's chunks and serves as the authoritative record of the document's characteristics, origin, and processing history. All fields marked as required MUST be populated; optional fields SHOULD be included when information is available from the source.",
  "type": "object",
  "required": [
    "document_id",
    "source_type",
    "original_url",
    "title",
    "file_hash",
    "file_size",
    "processing_timestamp",
    "adapter_version"
  ],
  "properties": {
    "document_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for this document (UUID v4). This ID MUST be consistent across discovery, acquisition, processing, and chunking outputs, enabling correlation across all pipeline stages."
    },
    "source_type": {
      "type": "string",
      "description": "Type of source this document originates from (arxiv, indico, internal_notes, twiki, other). Determines which source-specific metadata fields are relevant and which processing rules were applied."
    },
    "original_url": {
      "type": "string",
      "format": "uri",
      "description": "Original URL where this document was obtained. Serves as provenance information and enables re-acquisition if needed. MUST be a valid, absolute URI."
    },
    "local_path": {
      "type": "string",
      "description": "Path to the locally stored original file. MAY use virtual URI scheme (adp://{bucket}/{key}) to abstract storage location. Used for accessing the raw source file."
    },
    "title": {
      "type": "string",
      "description": "Official document title as provided by the source, without modifications. Used for display, search, and cataloging."
    },
    "authors": {
      "type": "array",
      "items": { "type": "string" },
      "description": "List of document authors in order of appearance. Each string represents one author name. SHOULD be included when available from source. Format is source-dependent but SHOULD preserve original author representation."
    },
    "publication_date": {
      "type": "string",
      "format": "date",
      "description": "Date when the document was published or made available, in ISO 8601 date format (YYYY-MM-DD). Used for temporal filtering and citation purposes."
    },
    "subject_categories": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Subject classification codes or categories from the source system (e.g., arXiv categories like 'hep-ex', 'hep-ph'). Used for topical filtering and organization."
    },
    "language": {
      "type": "string",
      "description": "Primary language of the document content as ISO 639-1 two-letter code (e.g., 'en', 'fr', 'de'). Used for language-specific processing and filtering."
    },
    "file_hash": {
      "type": "string",
      "description": "Cryptographic hash of the original source file (typically SHA-256). Used for integrity verification and deduplication. Format SHOULD be 64 hexadecimal characters for SHA-256."
    },
    "file_size": {
      "type": "integer",
      "description": "Size of the original source file in bytes. Used for storage accounting and processing capacity planning."
    },
    "processing_timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp when this document was processed through the pipeline. Used for tracking processing freshness and managing incremental updates."
    },
    "adapter_version": {
      "type": "string",
      "description": "Version of the adapter that processed this document (e.g., '1.2.3'). MUST follow semantic versioning. Used to track which processing logic version was applied, enabling reprocessing when adapters are updated."
    },
    "experiment_tags": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Tags identifying relevant HEP experiments or detectors (e.g., 'LHCb', 'ATLAS', 'CMS', 'ALICE'). Used for experiment-specific filtering and organization. Typically extracted from document content or metadata."
    },
    "collaboration": {
      "type": "string",
      "description": "Name of the scientific collaboration that produced this document (e.g., 'LHCb Collaboration', 'ATLAS Collaboration'). Used for attribution and collaboration-based filtering."
    },
    "license": {
      "type": "string",
      "description": "License or usage rights for this document (e.g., 'CC-BY-4.0', 'arXiv.org perpetual license'). Used to determine permitted uses and redistribution rights."
    }
  },
  "additionalProperties": false
}
